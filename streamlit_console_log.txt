
  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8502
  Network URL: http://192.168.20.19:8502

2025-08-07 20:24:10,048 - [INFO] - [src.tools.clients:48] - Google AI client configured successfully.
2025-08-07 20:24:10,049 - [INFO] - [src.tools.clients:65] - Requesting Flash Model: gemini-1.5-flash-latest
2025-08-07 20:24:10,051 - [INFO] - [src.planner.tool_planner:58] - Successfully loaded persona-tool map from '/home/mit/persona_rag_chatbot/config/persona_tool_map.yml'.
2025-08-07 20:24:10,051 - [INFO] - [src.router.tool_router:19] - ToolRouter initialized with 2 tools.
2025-08-07 20:24:10,051 - [INFO] - [src.tools.clients:58] - Requesting GenerativeModel: gemini-1.5-pro-latest
2025-08-07 20:24:10,051 - [INFO] - [src.tools.clients:65] - Requesting Flash Model: gemini-1.5-flash-latest
2025-08-07 20:24:10,051 - [INFO] - [__main__:51] - Unified agent initialized successfully and cached for the session.
2025-08-07 20:24:11,014 - [INFO] - [src.planner.query_rewriter:76] - Query deemed standalone. Bypassing LLM rewrite. Query: 'What company is the sponsor for Abaloparatide?'
2025-08-07 20:24:12,581 - [INFO] - [src.planner.persona_classifier:60] - Query classified for persona: 'regulatory_specialist'
2025-08-07 20:24:13,223 - [INFO] - [src.agent:57] - [TIMER] Decomposition took 642.00 ms
2025-08-07 20:24:13,223 - [INFO] - [src.agent:230] - Executing single-step plan for query: 'What company is the sponsor for Abaloparatide?'
2025-08-07 20:24:13,223 - [INFO] - [src.planner.query_classifier:56] - Classifying query: What company is the sponsor for Abaloparatide?
2025-08-07 20:24:14,129 - [INFO] - [src.planner.query_classifier:76] - Classification result: {
  "intent": "specific_fact_lookup",
  "keywords": [
    "Abaloparatide",
    "sponsor",
    "company"
  ],
  "question_is_graph_suitable": true,
  "themes": [
    "Drug/Therapy Description"
  ]
}
2025-08-07 20:24:14,129 - [INFO] - [src.planner.tool_planner:67] - Planning tools for intent 'specific_fact_lookup' and persona 'regulatory_specialist'
2025-08-07 20:24:14,129 - [INFO] - [src.planner.tool_planner:110] - Coverage threshold of 0.85 met. Finalizing plan.
2025-08-07 20:24:14,129 - [INFO] - [src.planner.tool_planner:113] - Generated tool plan: ['{\n  "tool_name": "query_knowledge_graph",\n  "estimated_coverage": 0.81\n}', '{\n  "tool_name": "vector_search",\n  "estimated_coverage": 0.5\n}']
2025-08-07 20:24:14,129 - [INFO] - [src.agent:129] - Query is suitable for Knowledge Graph. Executing KG tool first.
2025-08-07 20:24:14,130 - [INFO] - [src.router.tool_router:22] - [ToolRouter] Executing tool: 'query_knowledge_graph'
2025-08-07 20:24:15,301 - [INFO] - [src.tools.clients:97] - Neo4j driver connected successfully.
2025-08-07 20:24:16,448 - [INFO] - [src.tools.retrievers:175] - Generated Cypher: MATCH p=(drug:Entity)-[r:HASSPONSOR]->(sponsor:Entity) WHERE drug.name_normalized = 'abaloparatide' RETURN p, [rel IN relationships(p) | rel {.*, type: type(rel)}] AS rel_props_list
2025-08-07 20:24:16,821 - [INFO] - [src.tools.retrievers:25] - [TIMER] Tool: query_knowledge_graph took 2691.11 ms
2025-08-07 20:24:16,821 - [INFO] - [src.agent:140] - Knowledge Graph did not provide an answer. Falling back to vector search.
2025-08-07 20:24:16,821 - [INFO] - [src.router.tool_router:22] - [ToolRouter] Executing tool: 'vector_search'
2025-08-07 20:24:18,032 - [INFO] - [src.tools.clients:79] - Pinecone index 'pbac-rag-index' connected successfully.
2025-08-07 20:24:18,033 - [INFO] - [src.tools.retrievers:121] - Applying metadata filter: {'semantic_purpose': {'$in': ['Drug/Therapy Description']}}
2025-08-07 20:24:20,107 - [INFO] - [src.tools.retrievers:25] - [TIMER] Tool: vector_search took 3285.60 ms
2025-08-07 20:24:20,731 - [INFO] - [src.agent:112] - Re-ranked 10 snippets down to 0 using Gemini based on indices: [].
2025-08-07 20:24:20,731 - [INFO] - [src.agent:57] - [TIMER] Re-ranking with Gemini took 624.55 ms
2025-08-07 20:24:20,731 - [INFO] - [src.agent:57] - [TIMER] Single RAG Step for 'What company is the sponsor fo...' took 7508.28 ms
2025-08-07 20:24:20,732 - [INFO] - [src.agent:57] - [TIMER] Full Agent Run took 9717.71 ms
